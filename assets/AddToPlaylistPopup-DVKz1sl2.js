import{_ as N,r as n,h as R,b as u,o as d,c as p,e as g,w as y,d as e,F as v,i as U,A as I,t as h,s as a,g as C}from"./index-Ci3PLr0-.js";const x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAl5JREFUWEfVlzFoE2EYht83tygZdHVTcNDqoi7q1E0EBwfRwQ7FRehQSPT+y6loCkLu/y8YEEpBUCc72MXB4qiDOrkVNwcRwUEXwe3g/8xXkhJrWi/pHanfmp+8z73f+3/fHTHh4oT1sXsB0jStkpzKsux7HMefy3JqqAPtdnvKe/8cwLGe8LL3Pmk0GmtFgwwFsNYukpwDcA7AFQDXAPwEkBhjkiIhhgI4514DmDbGrP9urb1IMgJwmuRbBQnDcLUIkFwAfSHn3C0ABsA+AEu9tnzZCchIACrUbrePeO9vA5jptkbFtS1L40KMDNAXstZeIhkDOCkiqyKiIdX2jFRjA/RV0jS9JyKaj73qRq8tGthctWMAVUnT9JAKk7wMYI2khnQ5D0EhAAMhvQCgBeA4gFyzo1CAAZAGgPsAfv1rdpQCoCCdTudAlmUpgKskXwVBMF+v1z9tbktpAAO3ZY7kIoB42BQtHSBJkrOVSuVdd6+sGGM0pH9UoQDOuffqvjFmRVWcczUAdQAVANeNMS/LBhARWYiiqNnfJwBeeO/vbrVJi3ZgA0BXuoicCcPw8XbzoDSAPENIz/y/AM65DwBO5XxSDeCjYWfHdsA5NysiBwf/lKQupoXNQhrKrUBHArDWHiWpAnqn16/aYDnnNkKY05l8GWg2m3uq1eoNEbkJYL+IzERR9KxMgKcAZgHMA/ghIiHJE933xDcA7hhjdLL9VYU5kCTJeZIPSR7uqXwk+SQMwwfbWVsYgIr0P0yCIPhaq9W+5elpq9Wa1nNxHKtTuWr3fprlwi/g0MQd+A3bDlowmT31qgAAAABJRU5ErkJggg==",z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAbxJREFUWEftlr9Lw1AQx7/Xoh06KAVxcnYSF5c6KM4q4uDgX9BBcCjtPenSrHmhFETFyVmKIggOTuLQrW5aHF1cVHDrkianERWt/ZGWhCA04+P43id337v3CBF/FHF+DAF+VcCyrLTruqtElA6yNUR0DKCaz+dvW3W/Acrl8rht21cARkTkJGCAFQDJZrO5UCgUnn9qfwNorTcB7DDzbJDJv7S01jUROVJKHbQFME3TIKJFZl7yA1AqlaaIyM1ms49+4rXWVyJyrZQyAgHQWl8CaDLzclQALgCbmRNRAYiXmJl97ZIwWnDx2YK1qCowBAi3ApVKJV6v1zsaLJlMnouI02g01jt5oFgsOkT0YdZ+TUiWZb2ISMqPwbrEPDHz5CAAHvEGgLEu4tsi4hLRXpeYV2Y+HQig159rrcP1wBDgP1TAG69zZo5sFUd+Gd0BcN/HbKZXu8Iawy1vEyqlDiMB8JP0Z4yfVTxNRPcA8o7j1PpN0C0+Ho97bdqNxWJzuVzupu2b0Ds0TXMfwAYRTQQJAOABwBkzZ1t1/9x2hmGMJhKJ+SABUqlUNZPJ2O00fb3ngoTpWYEwk7XTfgMOWJww74UFpQAAAABJRU5ErkJggg==",T={class:"popup-content"},M={class:"playlist-list"},Q=["onClick"],S={class:"playlist-item"},q={class:"playlist-index"},K={__name:"AddToPlaylistPopup",setup(W,{expose:m}){const r=n(localStorage.getItem("TOKEN")),w=n(null),i=n(!1),A=n(!1),l=n(""),c=n([]),f=o=>{w.value=o,i.value=!0},k=()=>{A.value=!0},F=()=>{A.value=!1,l.value=""},B=async()=>{if(!l.value){a("歌单名称不能为空");return}try{const o=await C.addPlaylist({token:r.value,playlistName:l.value});o.code===200?(a("创建成功"),c.value.append({playlist_id:o.result.playlist_id,playlist_name:l.value}),l.value=""):a("创建失败")}catch(o){console.error(o),a("创建失败")}},E=async o=>{try{(await C.addSongToPlaylist({playlistId:o.playlist_id,songId:w.value,token:r.value})).code===200?a("添加成功"):a("添加失败")}catch(t){console.error(t),a("添加失败")}},D=()=>{const o=["#FFCCCC","#CCE5FF","#CCFFCC","#FFE5CC","#E5CCFF"];return o[Math.floor(Math.random()*o.length)]},P=async()=>{try{const o=await C.getPlaylists({token:r.value});o.code===200&&(c.value=o.result,console.log(o.result))}catch(o){console.error(o)}};return R(()=>{P()}),m({showPopup:f}),(o,t)=>{const _=u("van-popup"),b=u("van-field"),J=u("van-dialog");return d(),p(v,null,[g(_,{show:i.value,"onUpdate:show":t[0]||(t[0]=s=>i.value=s),round:"",position:"bottom",style:{height:"60%",background:"#fff"}},{default:y(()=>[e("div",T,[t[4]||(t[4]=e("div",{class:"popup-title"},"将歌曲添加到",-1)),e("div",M,[e("ul",null,[e("li",{onClick:k},t[3]||(t[3]=[e("div",{class:"playlist-item"},[e("div",{class:"icon-box",style:{"background-color":"#eee"}},[e("div",{class:"add-icon"},"+")]),e("span",null,"新建歌单")],-1)])),(d(!0),p(v,null,U(c.value,(s,V)=>(d(),p("li",{key:s.playlist_id,onClick:H=>E(s)},[e("div",S,[e("div",{class:"icon-box",style:I({backgroundColor:D()})},[e("div",q,h(V+1),1)],4),e("span",null,h(s.playlist_name),1)])],8,Q))),128))])])])]),_:1},8,["show"]),g(J,{show:A.value,"onUpdate:show":t[2]||(t[2]=s=>A.value=s),title:"新建歌单","show-cancel-button":"",onConfirm:B,onCancel:F,"cancel-button-color":"#999","confirm-button-color":"#41af79",width:"280px"},{default:y(()=>[g(b,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),placeholder:"请输入歌单名称"},null,8,["modelValue"])]),_:1},8,["show"])],64)}}},Y=N(K,[["__scopeId","data-v-eb521120"]]);export{Y as A,x as _,z as a};
