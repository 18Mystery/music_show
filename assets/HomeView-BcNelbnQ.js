import{_ as L,u as P,a as J,r as _,b as m,o as i,c as r,d as e,e as l,w as S,f as N,v as Q,g as U,s as R,h as T,F as b,i as C,j as Y,k as X,t as G,l as D,m as Z,n as j,p as O,q as W}from"./index-Ci3PLr0-.js";import{_ as H}from"./search-Bj0BaDWk.js";import{_ as $}from"./collect-active-BZg33xkB.js";import{_ as q}from"./collect-uw9KXPlZ.js";const ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAACjSURBVDiN7ZWxDcJAEAR3T18AJdAB2d+HdAB0ABUYKsAl0AIdQBcfUoI7wB2sE0Ib6eUPHHjS047upJWOKaW7pCvJDebT0t2/lWSQ1BvJRy1ZLdfK0qG7NySPhblLzrkbGwQALYCiYktqANzGZkbyU7gd/mUIACmlfYGvmzp3ZaEwxrgzs9JiT/EMZvYCsK0kPJukvpIMABBIniQd5v6V3wt4D2XLLzhc9J+uAAAAAElFTkSuQmCC",te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAKASURBVDiNnZU9ThtBFMd/b2WxSCHShgKlXLooBVkaGImCcANyAoxSpYIb2NzAHACFnCDcAFNEGuMUm1R03hIFKVoJIe0gsS+Fx9Z67VUSnjTN+/jP+/jPG6FBjDExsKuq+8B7ABHZtNZmW1tb74IgeGWt7TfFt+qKJEmiMAw7wLEHQ1VzEbkoiiL3unMgMcZkQNda+6WOIwuyvARiIFPVXlmWV8PhMK35jbzPRLKyLPevr69/zGVcBVXVnoicDgaDrKlUX8Um0AHaItIFPswAJ0kSVTLtDgaDkybAaakiubU2Aw6NMSfOubxqbwEsLy8fTTL9F9C6+AtmJEiSJFLVY1XNnXP/DVoXXz2tMAwPRCQCumma5oscfUVtVc2BvqpGIjLn6+c0Msa0W3iOAnOUqQ60XAoIHkuAxJvngCvSDkQkUdV8UZ8YTzx+2Fjl18c33H56y8PGaiOatTZT1VxVkwCIRSRd5KiqSbkUcL/zeqq733lNuRQ0gotIKiJR4PvW5NRoa4pT1QggYPzCoob4fvBYsjK8mypefrud9Pq8IZkIyAIgE5HED2pGiqI4BbKV73esnd2wdnbDi5+/ATLn3NywPdVioB+IyIXX79YdPf32VLUn7ikV95QC3aIoNhdR09MSVU2lQimstesNLfmr+K04AnDOrQeeZudAbIzpPBc4DMPPIhKJSG+mGmPMyBijzwE3xnR87OVEV130e4xb0t3e3o6ccyeL+lgDjFX1iPGnkAGHE9vcolfVr5PXKCK9oihO6xdMvi2gi/8UgL3q650BrpamqseekzDmeu4fTOzPZNn3rLVzW3EhMEynfCAi+4x39fQSxty/AK4adgx/ALznQYpq5dlVAAAAAElFTkSuQmCC",se="data:image/png;base64,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",oe={class:"search"},ne={class:"avatar"},ae={class:"info"},le={class:"item"},ie={class:"item"},re={class:"item"},ce={class:"item"},de={class:"item"},ue={__name:"MySearch",setup(M){const d=P(),u=J(),a=_([]),g=_(""),f=_(!1),A=()=>{f.value=!0,g.value="是否退出登录？"},w=_(!1),I=()=>{w.value=!0,B()},x=()=>{d.push({name:"search"})},v=new FormData,t=n=>{v.append("photo",n.file)};let o=localStorage.getItem("USER_ID"),c=localStorage.getItem("TOKEN");const h=_([{url:localStorage.getItem("USERIMG")}]),y=async()=>{if(o==null)return!1;let n;await U.photoUpload(v).then(s=>{console.log(s);let{code:E,msg:V,picUrl:z}=s;E==200?n=z:R(V)}),n&&await U.userImg({token:c,imgUrl:n}).then(s=>{let{msg:E}=s;R(E),localStorage.setItem("USERIMG",U.host+n)})},F=async()=>{const n=a.value.user_name;if(n.length>11)return R("昵称不能超过10个字符"),!1;const s=a.value.user_sex,E=a.value.birthday,V=a.value.phone_number,z=a.value.email;await U.userEdit({token:c,user_name:n,user_sex:s,birthday:E,phone_number:V,email:z}).then(p=>{console.log(p),R(p.msg),localStorage.setItem("USER_NAME",n)})},k=()=>{f.value=!1,localStorage.removeItem("TOKEN"),localStorage.removeItem("USER_ID"),localStorage.removeItem("USER_NAME"),localStorage.removeItem("USERIMG"),u.clearPlayList(),d.push({name:"login"})},B=async()=>{const n=localStorage.getItem("TOKEN");console.log("token:",n),await U.Info({token:n}).then(s=>{a.value=s.result[0],console.log("userInfo:",a.value)})};return(n,s)=>{const E=m("van-uploader"),V=m("van-popup"),z=m("van-dialog");return i(),r("div",oe,[e("div",{class:"seach-content"},[e("div",{class:"more",onClick:I},s[9]||(s[9]=[e("img",{src:ee,alt:""},null,-1)])),e("div",{class:"search-inp",onClick:x},s[10]||(s[10]=[e("div",{class:"search-icon"},[e("img",{src:H,alt:""})],-1),e("input",{type:"text",placeholder:"搜索音乐、歌手"},null,-1)])),s[11]||(s[11]=e("div",{class:"music-icon"},[e("img",{src:te,alt:""})],-1))]),l(V,{show:w.value,"onUpdate:show":s[6]||(s[6]=p=>w.value=p),position:"left",style:{width:"70%",height:"100%"}},{default:S(()=>[e("div",ne,[l(E,{class:"uploader",modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=p=>h.value=p),"max-count":1,"after-read":t},null,8,["modelValue"]),e("button",{onClick:y},"上传头像")]),e("div",ae,[e("div",le,[s[12]||(s[12]=e("div",{class:"label"},"昵称",-1)),N(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=p=>a.value.user_name=p)},null,512),[[Q,a.value.user_name]])]),e("div",ie,[s[13]||(s[13]=e("div",{class:"label"},"性别",-1)),N(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=p=>a.value.user_sex=p)},null,512),[[Q,a.value.user_sex]])]),e("div",re,[s[14]||(s[14]=e("div",{class:"label"},"生日",-1)),N(e("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=p=>a.value.birthday=p)},null,512),[[Q,a.value.birthday]])]),e("div",ce,[s[15]||(s[15]=e("div",{class:"label"},"手机号",-1)),N(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=p=>a.value.phone_number=p)},null,512),[[Q,a.value.phone_number]])]),e("div",de,[s[16]||(s[16]=e("div",{class:"label"},"邮箱",-1)),N(e("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=p=>a.value.email=p)},null,512),[[Q,a.value.email]])]),e("div",{class:"save",onClick:F},s[17]||(s[17]=[e("button",null,"保存修改",-1)]))]),e("div",{class:"exit-login"},[e("div",{class:"btn",onClick:A},s[18]||(s[18]=[e("div",{class:"closed-icon"},[e("img",{src:se,alt:""})],-1),e("p",null,"退出登录",-1)]))])]),_:1},8,["show"]),l(z,{show:f.value,"onUpdate:show":s[7]||(s[7]=p=>f.value=p),onConfirm:k,onCancel:s[8]||(s[8]=p=>f.value=!1),"show-cancel-button":"","cancel-button-color":"#999","confirm-button-color":"#41af79",width:"280px",message:g.value},null,8,["show","message"])])}}},ve=L(ue,[["__scopeId","data-v-fdf8e2d9"]]),pe={class:"swiper"},me=["src","alt"],ge={__name:"MySwiper",setup(M){const d=_([]),u=_(!0),a=async()=>{await U.getBanners().then(g=>{if(g.code===200){for(let f of g.result)f.imgUrl=U.host+f.imgUrl;d.value=g.result,u.value=!1,console.log("轮播图列表：",d.value)}}).catch(g=>{console.log(g)})};return T(()=>{a()}),(g,f)=>{const A=m("van-skeleton-image"),w=m("van-skeleton"),I=m("van-swipe-item"),x=m("van-swipe");return i(),r("div",pe,[l(x,{class:"my-swipe",autoplay:3e3,"lazy-render":"","indicator-color":"white"},{default:S(()=>[l(w,{loading:u.value,style:{padding:"0px"}},{template:S(()=>[l(A,{style:{width:"380px",height:"100%"}})]),_:1},8,["loading"]),(i(!0),r(b,null,C(d.value,v=>(i(),Y(I,{key:v.id},{default:S(()=>[e("img",{src:v.imgUrl,alt:v.title},null,8,me)]),_:2},1024))),128))]),_:1})])}}},_e=L(ge,[["__scopeId","data-v-ad94a114"]]),Ae={class:"popularSingers"},fe={style:{overflow:"hidden"}},he={style:{marginTop:"7px",marginLeft:"10px"}},we={class:"singers"},ye=["onClick"],Se={__name:"PopularSingers",setup(M){const d=P(),u=_([]),a=_(!0),g=async()=>{try{const A=await D.getHotSinger();A.code=="200"&&(u.value=A.artists,a.value=!1,console.log("热门歌手：",u.value))}catch(A){console.error(A)}};T(()=>{g()});const f=A=>{d.push({name:"singerDetail",params:{id:A}})};return(A,w)=>{const I=m("van-skeleton"),x=m("van-skeleton-paragraph"),v=m("lazy-component"),t=X("lazy");return i(),r("div",Ae,[w[0]||(w[0]=e("div",{class:"title-box"},[e("div",{class:"title"},[e("span",null,"热门歌手")]),e("div",{class:"more"},[e("span")])],-1)),l(I,{style:{padding:"0px"},loading:a.value},{template:S(()=>[(i(),r(b,null,C(5,o=>e("div",fe,[e("div",null,[l(I,{avatar:"","avatar-size":"60px",style:{marginLeft:"-10px"}})]),e("div",he,[l(x,{"row-width":"85%"})])])),64))]),_:1},8,["loading"]),l(v,null,{default:S(()=>[e("div",we,[(i(!0),r(b,null,C(u.value,o=>(i(),r("ul",{class:"list",key:o.id},[e("li",{onClick:c=>f(o.id,o.fansCount)},[N(e("img",null,null,512),[[t,o.picUrl]]),e("span",null,G(o.name),1)],8,ye)]))),128))])]),_:1})])}}},Ie=L(Se,[["__scopeId","data-v-cafa1c98"]]),xe={class:"recommendSongs"},ke={style:{display:"flex",width:"100%",padding:"10px 0px"}},Ue={style:{flex:1,marginLeft:"16px"}},Ee={class:"songs"},be=["onClick"],Ce={class:"left"},Be={class:"right"},Ne={class:"name"},Fe={class:"singer"},Re={class:"collect"},Le=["onClick"],Me={key:0,src:$,alt:"已收藏"},Ve={key:1,src:q,alt:"未收藏"},ze={__name:"RecommendSongs",setup(M){const d=J(),u=_([]),a=_(!1),g=async()=>{await D.getRecommendSong().then(t=>{t.code===200&&(u.value=t.data.dailySongs,a.value=!1,console.log("推荐歌曲:",u.value)),f()}).catch(t=>{console.error("获取推荐歌曲失败:",t)})},f=async()=>{for(const t of u.value)try{const o=await U.checkFavoriteStatus({token:localStorage.getItem("TOKEN"),songId:t.id});o.code===200&&(t.isFavorite=o.isFavorite)}catch{}},A=async t=>{var o;console.log("params传参：",t);try{if(t.isFavorite)await U.removeFavoriteSong({token:localStorage.getItem("TOKEN"),songId:t.id});else{const c=(o=t.al)==null?void 0:o.id,y=(await D.getAlbumContent(c)).album.size,k=(await D.getSingerDetail(t.ar[0].id)).artist.img1v1Url,B={token:localStorage.getItem("TOKEN"),songId:t.id,songName:t.name,artistId:t.ar[0].id,artistName:t.ar[0].name,artistImg:k,albumId:t.al.id,albumName:t.al.name,albumImg:t.al.picUrl,songNum:y};console.log("添加收藏参数：",B),await U.addFavoriteSong(B)}t.isFavorite=!t.isFavorite,R(t.isFavorite?"已收藏":"已取消收藏")}catch(c){console.error("切换收藏状态失败:",c),R("操作失败")}},w=t=>{d.addToNextInplayList(t),d.playSong(t)},I=Z(()=>{const o=[];for(let c=0;c<u.value.length;c+=3)o.push(u.value.slice(c,c+3));return o}),x=_(null),v=()=>{const t=x.value;let o=!1,c,h;t.addEventListener("mousedown",y=>{o=!0,c=y.pageX-t.offsetLeft,h=t.scrollLeft}),t.addEventListener("mouseleave",()=>{o=!1}),t.addEventListener("mouseup",()=>{o=!1}),t.addEventListener("mousemove",y=>{if(!o)return;y.preventDefault();const k=(y.pageX-t.offsetLeft-c)*2;t.scrollLeft=h-k})};return T(()=>{g(),v()}),(t,o)=>{const c=m("van-skeleton-image"),h=m("van-skeleton-paragraph"),y=m("van-skeleton"),F=X("lazy");return i(),r("div",xe,[o[0]||(o[0]=e("div",{class:"title-box"},[e("div",{class:"title"},[e("span",null,"推荐歌曲")])],-1)),(i(),r(b,null,C(3,k=>l(y,{style:{padding:"0px"},loading:a.value},{template:S(()=>[e("div",ke,[l(c,{style:{borderRadius:"10px",width:"70px",height:"70px"}}),e("div",Ue,[l(h,{"row-width":"60%",style:{marginTop:"10px"}}),l(h,{"row-width":"60%"})])]),l(h,{"row-width":"10%",style:{marginTop:"35px",marginLeft:"-15%"}})]),_:1},8,["loading"])),64)),e("div",Ee,[e("div",{class:"list-box",ref_key:"songsContainer",ref:x},[(i(!0),r(b,null,C(I.value,(k,B)=>(i(),r("ul",{class:"list",key:B},[(i(!0),r(b,null,C(k,(n,s)=>(i(),r("li",{class:"item-box",key:n.id,onClick:E=>w(n)},[e("div",Ce,[N(e("img",null,null,512),[[F,n.al.picUrl]])]),e("div",Be,[e("div",Ne,G(n.name),1),e("div",Fe,G(n.ar[0].name),1)]),e("div",Re,[e("i",{onClick:j(E=>A(n),["stop"])},[n.isFavorite?(i(),r("img",Me)):(i(),r("img",Ve))],8,Le)])],8,be))),128))]))),128))],512)])])}}},Qe=L(ze,[["__scopeId","data-v-8a85e54a"]]),De={class:"newSongs"},Ge={style:{overflow:"hidden"}},Te={style:{marginTop:"10px",marginLeft:"20px"}},Ke={class:"content"},Pe=["onClick"],Xe={class:"img"},Je={class:"text"},Ye={key:0,class:"loading"},K=6,Ze={__name:"NewSongs",setup(M){const d=_([]),u=_(!1),a=_(!1),g=_(0),f=P(),A=_(!1);async function w(){try{const v=await D.getNewSong(g.value+K);if(v&&v.result){const t=v.result.slice(g.value);let o=t.filter(c=>!d.value.some(h=>h.id===c.id));d.value=d.value.concat(o),A.value=!1,console.log("请求到的最新歌单:",o),g.value+=K,t.length<K&&(a.value=!0)}}catch(v){console.log("API请求失败:",v)}finally{u.value=!1,console.log("加载完成，当前最新歌单数据:",d.value)}}function I(){a.value||w()}function x(v,t,o){f.push({name:"newSongsList",params:{id:v,picUrl:t,name:o}})}return T(()=>{console.log("组件挂载，初始化数据"),w()}),(v,t)=>{const o=m("van-skeleton-image"),c=m("van-skeleton-paragraph"),h=m("van-skeleton"),y=m("van-list"),F=m("lazy-component"),k=m("van-loading"),B=X("lazy");return i(),r("div",De,[t[2]||(t[2]=e("div",{class:"title-box"},[e("div",{class:"title"},[e("span",null,"最新歌单")])],-1)),(i(),r(b,null,C(3,n=>l(h,{style:{padding:"10px 0"},loading:A.value},{template:S(()=>[(i(),r(b,null,C(2,s=>e("div",Ge,[e("div",null,[l(o,{style:{margin:"0 10px",width:"180px",height:"180px",borderRadius:"5%"}})]),e("div",Te,[l(c,{"row-width":"95%"})])])),64))]),_:1},8,["loading"])),64)),l(F,null,{default:S(()=>[l(y,{loading:u.value,"onUpdate:loading":t[0]||(t[0]=n=>u.value=n),finished:a.value,"finished-text":"没有更多了",onLoad:I},{default:S(()=>[e("div",Ke,[(i(!0),r(b,null,C(d.value,n=>(i(),r("div",{class:"songsList",key:n.id,onClick:s=>x(n.id,n.picUrl,n.name)},[e("div",Xe,[N(e("img",null,null,512),[[B,n.picUrl]])]),e("p",Je,G(n.name),1)],8,Pe))),128))])]),_:1},8,["loading","finished"])]),_:1}),d.value.length==0&&a.value?(i(),r("div",Ye,[l(k,{size:"24px"},{default:S(()=>t[1]||(t[1]=[O("加载中...")])),_:1})])):W("",!0)])}}},je=L(Ze,[["__scopeId","data-v-195b8d3a"]]),Oe={class:"home"},We={class:"swiper"},He={class:"container"},$e={class:"popularSingers"},qe={class:"container"},et={class:"recommendSongs"},tt={class:"container"},st={class:"newSongs"},ot={class:"container"},nt={__name:"HomeView",setup(M){return(d,u)=>(i(),r("div",Oe,[l(ve),e("div",We,[e("div",He,[l(_e)])]),e("div",$e,[e("div",qe,[l(Ie)])]),e("div",et,[e("div",tt,[l(Qe)])]),e("div",st,[e("div",ot,[l(je)])])]))}},ct=L(nt,[["__scopeId","data-v-8bae8058"]]);export{ct as default};
