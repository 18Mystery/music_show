import{_ as E,a as U,r as i,m as h,c as d,d as l,A as f,z as t,f as F,v as y,E as k,q as _,e as L,G as w,g as S,H as N,b as B,o as m,u as z}from"./index-Cshm0C-f.js";const M={class:"login"},T={class:"info-box"},q={class:"title"},G={class:"loginBtn"},P={class:"registerBtn"},$={class:"form"},H={class:"btn"},K={class:"forget"},O={key:0},j={__name:"LoginView",setup(J){const x=U(),C=z();var v=i(!0),c=i(!1),a=i(""),n=i(""),r=i("");const p=i(""),g=i(!1);function D(){v.value=!0,c.value=!1,a.value="",n.value="",r.value=""}function I(){v.value=!1,c.value=!0,a.value="",n.value="",r.value=""}var A=h(()=>a.value&&n.value),b=h(()=>a.value&&n.value&&r.value);const R=async()=>{const u=a.value,e=n.value,o=r.value;if(console.log("输入注册信息",{phone_number:u,user_password:e,again_password:o}),!u||!e||!o){w({message:"请填写完整信息！"});return}if(e!==o){w({message:"两次输入的密码不一致！"});return}await S.register({phone_number:u,user_password:e,again_password:o}).then(s=>{console.log(s),p.value=s.msg,g.value=!0,a.value="",n.value="",r.value=""},s=>{p.value=s.msg,g.value=!0})},V=async()=>{const u=a.value,e=n.value;if(console.log("输入登录信息",{phone_number:u,user_password:e}),!u||!e){w({message:"请填写完整信息！"});return}await S.login({phone_number:u,user_password:e}).then(o=>{console.log(o),o.code===200?(localStorage.setItem("TOKEN",o.token),localStorage.setItem("USER_ID",o.id),localStorage.setItem("USER_NAME",o.nickName),localStorage.setItem("USERIMG",S.host+o.userImg),N({message:"登陆成功",duration:500}),x.clearPlayList(),C.push({name:"home"})):w({message:o.msg+"！"}),console.log(o)},o=>{p.value=o.msg,g.value=!0})};return(u,e)=>{const o=B("van-dialog");return m(),d("div",M,[e[8]||(e[8]=l("div",{class:"bg"},null,-1)),l("div",T,[l("div",q,[l("div",G,[l("span",{onClick:e[0]||(e[0]=s=>D()),style:f({color:t(v)?"#383838":"#A6A6A6",fontSize:t(v)?"24px":"20px"})},"账号登陆",4)]),l("div",P,[l("span",{onClick:e[1]||(e[1]=s=>I()),style:f({color:t(c)?"#383838":"#A6A6A6",fontSize:t(c)?"24px":"20px"})},"账号注册",4)])]),l("div",$,[F(l("input",{type:"phone",placeholder:"请输入手机账号","onUpdate:modelValue":e[2]||(e[2]=s=>k(a)?a.value=s:a=s)},null,512),[[y,t(a)]]),F(l("input",{type:"password",placeholder:"请输入账号密码","onUpdate:modelValue":e[3]||(e[3]=s=>k(n)?n.value=s:n=s)},null,512),[[y,t(n)]]),t(c)?F((m(),d("input",{key:0,type:"password",placeholder:"请再次输入密码","onUpdate:modelValue":e[4]||(e[4]=s=>k(r)?r.value=s:r=s)},null,512)),[[y,t(r)]]):_("",!0),l("div",H,[t(v)?(m(),d("button",{key:0,onClick:e[5]||(e[5]=s=>V()),style:f({backgroundColor:t(A)?"#20A162":"#D9D9D9",color:t(A)?"#FFFFFF":"#808080"})},"登陆",4)):_("",!0),t(c)?(m(),d("button",{key:1,onClick:e[6]||(e[6]=s=>R()),style:f({backgroundColor:t(b)?"#20A162":"#D9D9D9",color:t(b)?"#FFFFFF":"#808080"})},"注册",4)):_("",!0)])]),L(o,{show:g.value,"onUpdate:show":e[7]||(e[7]=s=>g.value=s),"confirm-button-color":"#41af79",message:p.value},null,8,["show","message"])]),l("div",K,[t(v)?(m(),d("span",O,"忘记密码?")):_("",!0)])])}}},W=E(j,[["__scopeId","data-v-314fc81e"]]);export{W as default};
