import{_ as V,r as u,h as $,c as l,d as s,e as v,w as f,g as p,b as w,o as n,F as k,i as C,t as i,f as D,C as b,u as B}from"./index-Ci3PLr0-.js";import{_ as N}from"./backSearch-D-eDlE1G.js";const E={class:"concern"},I={class:"header"},L={class:"content"},T={class:"singer"},U=["onClick"],q={class:"info"},K={class:"singer-img"},O=["src"],R={class:"singer-name"},j={class:"attention-time"},z={class:"message"},A={class:"user"},G=["onClick"],H={class:"info"},J={class:"singer-img"},P=["src"],Q={class:"singer-name"},W={class:"attention-time"},X={class:"message"},Y={__name:"ConcernView",setup(Z){const h=B(),m=u(0),M=localStorage.getItem("TOKEN"),r=u([]),c=u([]),x=t=>{h.push({name:"singerDetail",params:{id:t}})},y=t=>{h.push({name:"userDetail",params:{userId:t}})},g=t=>{const e=new Date(t),o=(new Date-e)/1e3;return o<60?t="刚刚":o<3600?t=Math.floor(o/60)+"分钟前":o<86400?t=Math.floor(o/3600)+"小时前":o<2592e3?t=Math.floor(o/86400)+"天前":o<31536e3?t=Math.floor(o/2592e3)+"月前":t=Math.floor(o/31536e3)+"年前",t},F=async()=>{await p.getFollowing({token:M}).then(t=>{if(console.log("关注列表:",t),t.code===200){for(let e of t.result.artists)e.followed_at=g(e.followed_at);r.value=t.result.artists;for(let e of t.result.users)e.avatar_url=p.host+e.avatar_url,e.followed_at=g(e.followed_at);c.value=t.result.users}})};return $(()=>{F()}),(t,e)=>{const _=w("van-tab"),o=w("van-tabs");return n(),l("div",E,[s("div",I,[s("i",{onClick:e[0]||(e[0]=a=>t.$router.go(-1))},e[2]||(e[2]=[s("img",{src:N,alt:""},null,-1)])),e[3]||(e[3]=s("div",null,"关注",-1))]),s("div",L,[v(o,{active:m.value,"onUpdate:active":e[1]||(e[1]=a=>m.value=a),swipeable:"",color:"#20a162","line-width":"24px","title-active-color":"#20a162"},{default:f(()=>[v(_,{title:"歌手"},{default:f(()=>[s("div",T,[s("ul",null,[(n(!0),l(k,null,C(r.value,(a,d)=>(n(),l("li",{key:d,onClick:S=>x(a.id)},[s("div",q,[s("div",K,[s("img",{src:a.avatar_url,alt:""},null,8,O)]),s("div",R,i(a.name),1)]),s("div",j,i(a.followed_at),1)],8,U))),128))]),D(s("p",z,"暂无关注歌手~",512),[[b,r.value.length===0]])])]),_:1}),v(_,{title:"用户"},{default:f(()=>[s("div",A,[s("ul",null,[(n(!0),l(k,null,C(c.value,(a,d)=>(n(),l("li",{key:d,onClick:S=>y(a.id)},[s("div",H,[s("div",J,[s("img",{src:a.avatar_url,alt:""},null,8,P)]),s("div",Q,i(a.name),1)]),s("div",W,i(a.followed_at),1)],8,G))),128))]),D(s("p",X,"暂无关注用户~",512),[[b,c.value.length===0]])])]),_:1})]),_:1},8,["active"])])])}}},et=V(Y,[["__scopeId","data-v-adf5e196"]]);export{et as default};
