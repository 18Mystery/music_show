import{_ as V}from"./playMy-FspMaofR.js";import{_ as K,r as a,h as R,c as e,d as t,t as u,e as r,w as d,g as m,x as N,b as S,o as n,p as w,F as E,i as M,A as H,u as O}from"./index-Cshm0C-f.js";const P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAaBJREFUSEu9lk0rRVEUhp/3bxiYmErKxMRHhIkBJSQmkstA+ZgpMaAMlDLwVUZEKAYyUT4yZSR/QfyL5Wztc7u45569kVX7tGu/73rO3p219hH/EPrKMLMuoBlo8uMCuE3m15KeUr2Z1QHdQBvQDlwl83vgQZKbF+MTxMzmgZWMzb0AM5JOzWwEWAWqMrRHkobStSLEzCzw5JYSnRu5Iekj/8fDzHaA8VxXvGBS0rbMrCE528d4f7Cj3kFGgb1gS7xw0kHWgLl4b7Bj00Hc59kabIkX3jnIPjAc7w12HDnINLAebIkXzjpIh6/WeHuYozGtk22gEOaJUu1KKqSQ6qRf3QA1USkqi5+BzgTyWtpWeoGzP4R0S7ostpU0cdK+XE9a/APQgqTlNE+5Vr8FTPwCdCJpoNT/DeIb5jnQ8wPQnqSxr76yEA+K7QTHkgbLvVgmxIOOgf6AHd1Icrdj2agI8aApYKMC6ECSuykzIxfiQVmf97KkhbydBkE8qMXfO65g39z1IOkwD/CtTvIMZlYL9LmiLf1zyfMF7yQvUaX1d/ysgD5+6WI7AAAAAElFTkSuQmCC",D={class:"my"},W={class:"personal"},$={class:"infoBox"},j={class:"avatar"},q=["src"],X={class:"name"},Y={class:"numBox"},Z={class:"buttonBox"},G={class:"tabBox"},J={class:"mySongList"},tt={key:0,class:"loading"},st={key:1,class:"no-data"},ot={key:2},lt=["onClick"],et={class:"playlist-index"},nt={class:"info"},at={class:"name"},it={class:"collectSongList"},ut={key:0,class:"loading"},ct={key:1,class:"no-data"},rt={key:2},dt=["onClick"],vt={class:"picture"},gt=["src","alt"],_t={class:"info"},pt={class:"name"},mt={__name:"MyView",setup(yt){const y=O(),b=a(0),v=localStorage.getItem("TOKEN"),L=a(localStorage.getItem("USERIMG")),I=a(localStorage.getItem("USER_NAME")),A=a(0),f=a(0),g=a([]),_=a([]),k=a(!0),h=a(!0),p=["#daf0e5","#b6e0cc","#92d1b2","#4ab280"],B=async()=>{await m.getFollowing({token:v}).then(o=>{o.code===200&&(A.value=o.result.users.length+o.result.artists.length,console.log("关注数量:",A.value))}),await m.getFollowers({token:v}).then(o=>{o.code===200&&(f.value=o.result.users.length),console.log("粉丝数量:",f.value)}).catch(o=>{console.log(o)})},F=async()=>{k.value=!0,await m.getPlaylists({token:v}).then(o=>{o.code===200?(g.value=o.result,console.log("我的歌单：",g.value)):N({title:"提示",message:"登录已失效，请重新登录",confirmButtonColor:"#20a162",confirmButtonText:"跳转登录",cancelButtonText:"否"}).then(()=>{y.push("/login")}).catch(()=>{console.log("")})}).catch(o=>{console.log("获取我的歌单列表失败：",o)}).finally(()=>{k.value=!1})},z=(o,s,c)=>{y.push({name:"mySongList",params:{playlistId:o,playlistName:s,backgroundColor:c}})},x=async()=>{h.value=!0,await m.getFavoritePlaylists({token:v}).then(o=>{o.code===200&&(_.value=o.result,console.log("收藏歌单：",_.value))}).catch(o=>{console.log("获取收藏歌单列表失败：",o)}).finally(()=>{h.value=!1})};function Q(o,s,c){y.push({name:"newSongsList",params:{id:o,picUrl:s,name:c}})}return R(()=>{B(),F(),x()}),(o,s)=>{const c=S("van-loading"),C=S("van-tab"),T=S("van-tabs");return n(),e("div",D,[s[11]||(s[11]=t("div",{class:"header"},[t("div",null,"我的")],-1)),t("div",W,[t("div",$,[t("div",j,[t("img",{src:L.value,alt:""},null,8,q)]),t("div",X,u(I.value),1)]),t("div",Y,[t("div",{onClick:s[0]||(s[0]=l=>o.$router.push("/concern"))},[t("p",null,u(A.value),1),s[5]||(s[5]=t("p",null,"关注",-1))]),t("div",{onClick:s[1]||(s[1]=l=>o.$router.push("/fans"))},[t("p",null,u(f.value),1),s[6]||(s[6]=t("p",null,"粉丝",-1))])])]),t("div",Z,[t("div",{onClick:s[2]||(s[2]=l=>o.$router.push("/recentlyPlay"))},s[7]||(s[7]=[t("i",null,[t("img",{src:V,alt:""})],-1),t("span",null,"最近播放",-1)])),t("div",{onClick:s[3]||(s[3]=l=>o.$router.push("/myFavorites"))},s[8]||(s[8]=[t("i",null,[t("img",{src:P,alt:""})],-1),t("span",null,"我的收藏",-1)]))]),t("div",G,[r(T,{active:b.value,"onUpdate:active":s[4]||(s[4]=l=>b.value=l),swipeable:"","title-active-color":"#20a162",color:"#30dd94","line-width":"36px"},{default:d(()=>[r(C,{title:"我的歌单"},{default:d(()=>[t("div",J,[k.value?(n(),e("div",tt,[r(c,{size:"24px"},{default:d(()=>s[9]||(s[9]=[w("加载中...")])),_:1})])):g.value.length===0?(n(),e("div",st," 暂无我的歌单~ ")):(n(),e("ul",ot,[(n(!0),e(E,null,M(g.value,(l,i)=>(n(),e("li",{key:i,onClick:U=>z(l.playlist_id,l.playlist_name,p[i%p.length])},[t("div",{class:"picture",style:H({backgroundColor:p[i%p.length]})},[t("div",et,u(i+1),1)],4),t("div",nt,[t("div",at,u(l.playlist_name),1),t("p",null,u(l.songNum)+"首",1)])],8,lt))),128))]))])]),_:1}),r(C,{title:"收藏歌单"},{default:d(()=>[t("div",it,[h.value?(n(),e("div",ut,[r(c,{size:"24px"},{default:d(()=>s[10]||(s[10]=[w("加载中...")])),_:1})])):_.value.length===0?(n(),e("div",ct," 暂无收藏歌单~ ")):(n(),e("ul",rt,[(n(!0),e(E,null,M(_.value,(l,i)=>(n(),e("li",{key:i,onClick:U=>Q(l.playlist_id,l.playlist_img,l.playlist_name)},[t("div",vt,[t("img",{src:l.playlist_img,alt:"图片"+i},null,8,gt)]),t("div",_t,[t("div",pt,u(l.playlist_name),1)])],8,dt))),128))]))])]),_:1})]),_:1},8,["active"])])])}}},kt=K(mt,[["__scopeId","data-v-b02347fd"]]);export{kt as default};
