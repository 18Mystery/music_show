import{_ as P,a as W,r as u,m as K,h as G,c as v,d as s,e as p,w as m,g as f,b as k,o as _,f as g,C as A,F as S,i as V,y as M,t as r,n as y,u as z,s as a}from"./index-Cshm0C-f.js";import{_ as Y}from"./backSearch-D-eDlE1G.js";import{_ as x}from"./play-DwFW73Pk.js";import{_ as J,a as U,A as H}from"./AddToPlaylistPopup-DupXLtp7.js";const b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAtRJREFUaEPtmO2OTEEQht/aK+E3lyOEEEKIZVmWrh7ZzX6FmK72/R1CCCHE5fCbK5mSkZ5JzzE7p0+fHnJk5ueZ7up63re6zukmdPxHHc8fC4B/7eDCgYUDLRX4/0vIObdNRIcGg8Fur9f70lKwpOn9fv/w0tLSpqp+tdZuz5pU64CIfANwIAQ5xsyfkrLIHCQiRwF8DNO/M/PBVgBBjc+jIER0whjzITO/mdO898dV9f1o0GAwOFLneq0Dw2AVVaCqp6y170pCOOdOEtHbKGaS20kAw6BVdQCcYeY3JSBE5DSA1zkuJwMMg1dVIqJzxphXbSC892dV9eUoRlN3GwGEcppQS1WXrbUvciCcc+eJ6Hk0t7GrjQFCOU2oBmCFmZ82gRCRiwCeRGWT5WYWQCinCfWIaNUY8ygFwnt/WVUfRmWT7WI2QCinCRUBrDHz/VkQInIVwL1oTGP34vitAEI5TagJwDDznWkQInJ92NCiskl2bS9RWgMEJ6qq3mDmfryoiPQA3I6e1bqVUo5FAALEhLqqumGtvRX2yzoR3YwS2tOllKSLllCNylvh/51o3B/uNE16bgB7qD1eL3alTdJzBQjltAkgVn34eIuZd0slPm4EpQN2HsB7v66q8YYda0REG8aY3xu71K9YFwrKV1tldzaxc84QkYxrM1K76oqqsrV2/EJr40YRB7z3a6p6d1arrL7IiOiaMSb+pMjiaA0gIqsAHoxWn6Vu1SUAV5h5/FGXQ9AKwDm3QkSPo7KpVbXqlqpestaOP6ubQmQDiMgygGfRgslqVl0DcIGZ44NNMkcWwJRjYGMVp7j3dw401QN4G/WmuDjfI2WnD/Wdvlbp9MVW568WReQHgH2hryVd9yX3wCkDK27/ZOb9s+LVttFwvb6VctHaJvF47sh1Vd1pfb1eKql5xal1YF4Ll4q7ACilZG6chQO5ypWat3CglJK5cX4BBVaEQOSzMSAAAAAASUVORK5CYII=",X={class:"myFavorites"},Z={class:"header"},$={class:"content"},j={class:"message01"},ss={class:"songs"},os={class:"listTop"},ts={class:"listTopLeft"},ls={class:"songlist"},es=["onClick"],ns={class:"right"},as=["onClick"],is=["onClick"],rs={class:"message01"},cs={class:"albums"},ds={class:"albumList"},us=["onClick"],vs={class:"left"},ps=["src"],_s={class:"middle"},ms={class:"name"},gs={class:"date"},As=["onClick"],Cs={__name:"MyFavorites",setup(fs){const E=z(),e=W(),w=u(0),C=u(localStorage.getItem("TOKEN")),n=u([]),i=u([]),h=u(null),F=o=>{h.value.showPopup(o)},R=async()=>{const o=await f.getFavorites({token:C.value});console.log("收藏列表数据:",o),o.code===200&&(o.songs&&(n.value=o.songs,console.log("收藏歌曲列表:",n.value)),o.albums&&(i.value=o.albums,console.log("收藏专辑列表:",i.value)))},Q=o=>{if(o.length===0){a("暂无歌曲可播放");return}e.clearPlayList(),e.addSongsToplayList(o),e.playSong(o[0])},O=o=>{e.addToNextInplayList(o),console.log(o),e.playSong(o)},D=async o=>{try{const t=await f.removeFavoriteSong({token:C.value,songId:o.id||o.song_id});t.code===200?(a("已取消收藏"),console.log("歌曲已从收藏列表中移除:",o),n.value=n.value.filter(c=>c.id!==o.id)):(console.error(t.msg),a("操作失败"))}catch(t){console.error(t),a("操作失败")}},q=async o=>{try{const t=await f.removeFavoriteAlbum({token:C.value,albumId:o.id});t.code===200?(a("已取消收藏"),console.log("专辑已从收藏列表中移除:",o),i.value=i.value.filter(c=>c.id!==o.id)):(console.error(t.msg),a("操作失败"))}catch(t){console.error(t),a("操作失败")}},B=K(()=>e.currentSong?e.currentSong.id:null),L=o=>{E.push({name:"albumDetail",params:{id:o}})},N=o=>{e.addToNextInplayList(o),a("已添加到播放列表"),console.log("歌曲已添加到当前播放歌曲的后面:",o)};return G(()=>{R()}),(o,t)=>{const c=k("van-cell"),I=k("van-tab"),T=k("van-tabs");return _(),v("div",X,[s("div",Z,[s("i",{onClick:t[0]||(t[0]=l=>o.$router.go(-1))},t[3]||(t[3]=[s("img",{src:Y,alt:""},null,-1)])),t[4]||(t[4]=s("div",null,"我的收藏",-1))]),s("div",$,[p(T,{active:w.value,"onUpdate:active":t[2]||(t[2]=l=>w.value=l),color:"#20a162","line-width":"24px","title-active-color":"#20a162"},{default:m(()=>[p(I,{title:"歌曲"},{default:m(()=>[g(s("p",j,"暂无收藏歌曲~",512),[[A,n.value.length===0]]),g(s("div",ss,[s("div",os,[s("div",ts,[s("i",{onClick:t[1]||(t[1]=l=>Q(n.value))},t[5]||(t[5]=[s("img",{src:x,alt:""},null,-1)])),t[6]||(t[6]=s("span",null,"全部播放",-1))])]),s("div",ls,[s("ul",null,[(_(!0),v(S,null,V(n.value,l=>(_(),v("li",{key:l.id,class:M({"active-song":l.id===B.value})},[s("div",{class:"left",onClick:d=>O(l)},[s("p",null,r(l.song_name),1),s("span",null,r(l.artist_name)+" - "+r(l.album_name),1)],8,es),s("div",ns,[s("i",null,[s("img",{src:J,alt:"",onClick:y(d=>N(l),["stop"])},null,8,as)]),s("i",null,[p(c,{onClick:d=>F(l.id)},{default:m(()=>t[7]||(t[7]=[s("img",{src:U,alt:""},null,-1)])),_:2},1032,["onClick"])]),s("i",{onClick:y(d=>D(l),["stop"])},t[8]||(t[8]=[s("img",{src:b,alt:""},null,-1)]),8,is)])],2))),128))])])],512),[[A,n.value.length>0]])]),_:1}),p(I,{title:"专辑"},{default:m(()=>[g(s("p",rs,"暂无收藏专辑~",512),[[A,i.value.length===0]]),g(s("div",cs,[s("div",ds,[s("ul",null,[(_(!0),v(S,null,V(i.value,l=>(_(),v("li",{key:l.id,onClick:d=>L(l.id)},[s("div",vs,[s("img",{src:l.album_img,alt:""},null,8,ps)]),s("div",_s,[s("p",ms,r(l.album_name),1),s("p",gs,[s("span",null,r(l.song_num)+"首 来自 "+r(l.artist_name),1)])]),s("div",{class:"right",onClick:y(d=>q(l),["stop"])},t[9]||(t[9]=[s("img",{src:b,alt:""},null,-1)]),8,As)],8,us))),128))])])],512),[[A,i.value.length>0]])]),_:1})]),_:1},8,["active"])]),p(H,{ref_key:"addToPlaylistPopup",ref:h},null,512)])}}},Is=P(Cs,[["__scopeId","data-v-fa7cfc2b"]]);export{Is as default};
